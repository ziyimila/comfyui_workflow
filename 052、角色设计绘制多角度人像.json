{"last_node_id":29,"last_link_id":46,"nodes":[{"id":5,"type":"EmptyLatentImage","pos":[990,460],"size":[210,110],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"LATENT","label":"Latent","type":"LATENT","shape":3,"links":[8]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"EmptyLatentImage"},"widgets_values":[1328,800,1]},{"id":12,"type":"ImageGenResolutionFromImage","pos":[650,40],"size":[330,50],"flags":{},"order":8,"mode":0,"inputs":[{"name":"image","label":"图像","type":"IMAGE","link":12}],"outputs":[{"name":"IMAGE_GEN_WIDTH (INT)","label":"宽度(整数)","type":"INT","shape":3,"links":[13],"slot_index":0},{"name":"IMAGE_GEN_HEIGHT (INT)","label":"高度(整数)","type":"INT","shape":3,"links":[14],"slot_index":1}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"ImageGenResolutionFromImage"},"widgets_values":[]},{"id":14,"type":"ControlNetApply","pos":[1840,-100],"size":[320,100],"flags":{},"order":15,"mode":0,"inputs":[{"name":"conditioning","label":"条件","type":"CONDITIONING","link":24},{"name":"control_net","label":"ControlNet","type":"CONTROL_NET","link":20},{"name":"image","label":"图像","type":"IMAGE","link":23}],"outputs":[{"name":"CONDITIONING","label":"条件","type":"CONDITIONING","shape":3,"links":[25],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"ControlNetApply"},"widgets_values":[1]},{"id":25,"type":"PreviewImage","pos":[2840,270],"size":[210,246],"flags":{},"order":18,"mode":0,"inputs":[{"name":"images","label":"图像","type":"IMAGE","link":36}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":18,"type":"FaceDetailer","pos":[2230,270],"size":[510,948],"flags":{},"order":17,"mode":0,"inputs":[{"name":"image","label":"图像","type":"IMAGE","link":42,"slot_index":0},{"name":"model","label":"模型","type":"MODEL","link":38,"slot_index":1},{"name":"clip","label":"CLIP","type":"CLIP","link":43},{"name":"vae","label":"VAE","type":"VAE","link":41},{"name":"positive","label":"正面条件","type":"CONDITIONING","link":39,"slot_index":4},{"name":"negative","label":"负面条件","type":"CONDITIONING","link":40},{"name":"bbox_detector","label":"BBox检测","type":"BBOX_DETECTOR","link":32,"slot_index":6},{"name":"sam_model_opt","label":"SAM模型","type":"SAM_MODEL","shape":7,"link":37},{"name":"segm_detector_opt","label":"Segm检测","type":"SEGM_DETECTOR","shape":7,"link":null},{"name":"detailer_hook","label":"细化约束","type":"DETAILER_HOOK","shape":7,"link":null},{"name":"scheduler_func_opt","type":"SCHEDULER_FUNC","shape":7,"link":null}],"outputs":[{"name":"image","label":"图像","type":"IMAGE","shape":3,"links":[36],"slot_index":0},{"name":"cropped_refined","label":"细化图像","type":"IMAGE","shape":6,"links":null},{"name":"cropped_enhanced_alpha","label":"细化部分","type":"IMAGE","shape":6,"links":null},{"name":"mask","label":"遮罩","type":"MASK","shape":3,"links":null},{"name":"detailer_pipe","label":"细化节点束","type":"DETAILER_PIPE","shape":3,"links":null},{"name":"cnet_images","label":"ControlNet图像","type":"IMAGE","shape":6,"links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"808b0dedf03534a2594ecb60a9d6305a044efdc2","Node name for S&R":"FaceDetailer"},"widgets_values":[256,true,2048,377905275283584,"randomize",20,8,"euler","normal",0.5,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false,20,false,false],"color":"#223","bgcolor":"#335"},{"id":7,"type":"ControlNetLoader","pos":[1100,-210],"size":[327.8615417480469,82],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","label":"ControlNet","type":"CONTROL_NET","shape":3,"links":[9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"ControlNetLoader"},"widgets_values":["base\\control_v11p_sd15_openpose_fp16.safetensors"]},{"id":6,"type":"ControlNetApply","pos":[1104,-79],"size":[317.4000244140625,98],"flags":{},"order":12,"mode":0,"inputs":[{"name":"conditioning","label":"条件","type":"CONDITIONING","link":18},{"name":"control_net","label":"ControlNet","type":"CONTROL_NET","link":9},{"name":"image","label":"图像","type":"IMAGE","link":16}],"outputs":[{"name":"CONDITIONING","label":"条件","type":"CONDITIONING","shape":3,"links":[24],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"ControlNetApply"},"widgets_values":[1]},{"id":16,"type":"ControlNetLoader","pos":[1840,-220],"size":[331.8905334472656,82],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"CONTROL_NET","label":"ControlNet","type":"CONTROL_NET","shape":3,"links":[20]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"ControlNetLoader"},"widgets_values":["base\\control_v11p_sd15_lineart_fp16.safetensors"]},{"id":23,"type":"UltralyticsDetectorProvider","pos":[1780,290],"size":[350,80],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"BBOX_DETECTOR","label":"BBox检测","type":"BBOX_DETECTOR","shape":3,"links":[32]},{"name":"SEGM_DETECTOR","label":"SEGM检测","type":"SEGM_DETECTOR","shape":3,"links":null}],"properties":{"cnr_id":"comfyui-impact-subpack","ver":"74db20c95eca152a6d686c914edc0ef4e4762cb8","Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"],"color":"#233","bgcolor":"#355"},{"id":8,"type":"OpenposePreprocessor","pos":[660,-200],"size":[320,170],"flags":{},"order":10,"mode":0,"inputs":[{"name":"image","label":"图像","type":"IMAGE","link":10},{"name":"resolution","label":"分辨率","type":"INT","widget":{"name":"resolution"},"link":15}],"outputs":[{"name":"IMAGE","label":"图像","type":"IMAGE","shape":3,"links":[16,44],"slot_index":0},{"name":"POSE_KEYPOINT","label":"姿态关键点","type":"POSE_KEYPOINT","shape":3,"links":null}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"OpenposePreprocessor"},"widgets_values":["enable","enable","enable",512,"disable"]},{"id":27,"type":"PreviewImage","pos":[1107,-522],"size":[210,246],"flags":{},"order":13,"mode":0,"inputs":[{"name":"images","label":"图像","type":"IMAGE","link":44}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":28,"type":"PreviewImage","pos":[1886,-506],"size":[210,246],"flags":{},"order":14,"mode":0,"inputs":[{"name":"images","label":"图像","type":"IMAGE","link":45}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":17,"type":"LineArtPreprocessor","pos":[1470,-210],"size":[320,80],"flags":{},"order":11,"mode":0,"inputs":[{"name":"image","label":"图像","type":"IMAGE","link":46},{"name":"resolution","label":"分辨率","type":"INT","widget":{"name":"resolution"},"link":21}],"outputs":[{"name":"IMAGE","label":"图像","type":"IMAGE","shape":3,"links":[23,45],"slot_index":0}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"LineArtPreprocessor"},"widgets_values":["disable",512]},{"id":1,"type":"Efficient Loader","pos":[526,311.8125],"size":[400,462],"flags":{},"order":4,"mode":0,"inputs":[{"name":"lora_stack","label":"LoRA堆","type":"LORA_STACK","shape":7,"link":null},{"name":"cnet_stack","label":"ControlNet堆","type":"CONTROL_NET_STACK","shape":7,"link":null}],"outputs":[{"name":"MODEL","label":"模型","type":"MODEL","shape":3,"links":[1],"slot_index":0},{"name":"CONDITIONING+","label":"正面条件","type":"CONDITIONING","shape":3,"links":[18],"slot_index":1},{"name":"CONDITIONING-","label":"负面条件","type":"CONDITIONING","shape":3,"links":[3],"slot_index":2},{"name":"LATENT","label":"Latent","type":"LATENT","shape":3,"links":[],"slot_index":3},{"name":"VAE","label":"VAE","type":"VAE","shape":3,"links":[5],"slot_index":4},{"name":"CLIP","label":"CLIP","type":"CLIP","shape":3,"links":[43],"slot_index":5},{"name":"DEPENDENCIES","label":"依赖","type":"DEPENDENCIES","shape":3,"links":null}],"properties":{"cnr_id":"efficiency-nodes-comfyui","ver":"3ead4afd120833f3bffdefeca0d6545df8051798","Node name for S&R":"Efficient Loader"},"widgets_values":["SD15\\动漫\\revAnimated_v2Rebirth.safetensors","vae-ft-mse-840000-ema-pruned.safetensors",-1,"None",1,1,"(a character sheet of a woman from different angles with a grey background:1.4) , auburn hair, eyes open, cinematic lighting, Hyperrealism, depth of field, ultra highres,8k, studio lighting,","embedding:easynegative, canvasframe,canvas frame,eyes shut,wink,blurry,hands,closed eyes,(easynegative),((((ugly)))),(((duplicate))),((morbid)),((mutilated)),out of frame,extra fingers,mutated hands,((poorly drawn hands)),((poorly drawn face)),((bad art)),blurry,(((mutation))),(((deformed))),blurry,((bad anatomy)),(((bad proportions))),((extra limbs)),cloned face,(((disfigured))),gross proportions,(malformed limbs),((missing arms)),((missing legs)),((floating limbs)),((disconnected limbs)),((malformed hands)),((missing fingers)),worst quality,((disappearing arms)),((disappearing legs)),(((extra arms))),(((extra legs))),(fused fingers),(too many fingers),(((long neck))),canvas frame,((worst quality)),((low quality)),lowres,sig,signature,watermark,username,bad,immature,cartoon,anime,3d,painting,b&w","none","A1111",512,512,1],"color":"#443322","bgcolor":"#665533","shape":1},{"id":10,"type":"PixelPerfectResolution","pos":[650,150],"size":[390,110],"flags":{},"order":9,"mode":0,"inputs":[{"name":"original_image","label":"图像","type":"IMAGE","link":11},{"name":"image_gen_width","label":"宽度","type":"INT","widget":{"name":"image_gen_width"},"link":13},{"name":"image_gen_height","label":"高度","type":"INT","widget":{"name":"image_gen_height"},"link":14}],"outputs":[{"name":"RESOLUTION (INT)","label":"分辨率(整数)","type":"INT","shape":3,"links":[15,21],"slot_index":0}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"1e9eac6377c882da8bb360c7544607036904362c","Node name for S&R":"PixelPerfectResolution"},"widgets_values":[512,512,"Just Resize"]},{"id":26,"type":"SAMLoader","pos":[1780,450],"size":[340,82],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"SAM_MODEL","label":"SAM模型","type":"SAM_MODEL","shape":3,"links":[37]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"808b0dedf03534a2594ecb60a9d6305a044efdc2","Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","Prefer GPU"],"color":"#323","bgcolor":"#535"},{"id":2,"type":"KSampler (Efficient)","pos":[1290,310],"size":[330,586],"flags":{},"order":16,"mode":0,"inputs":[{"name":"model","label":"模型","type":"MODEL","link":1},{"name":"positive","label":"正面条件","type":"CONDITIONING","link":25},{"name":"negative","label":"负面条件","type":"CONDITIONING","link":3},{"name":"latent_image","label":"Latent","type":"LATENT","link":8},{"name":"optional_vae","label":"VAE(可选)","type":"VAE","shape":7,"link":5},{"name":"script","label":"脚本","type":"SCRIPT","shape":7,"link":null}],"outputs":[{"name":"MODEL","label":"模型","type":"MODEL","shape":3,"links":[38],"slot_index":0},{"name":"CONDITIONING+","label":"正面条件","type":"CONDITIONING","shape":3,"links":[39],"slot_index":1},{"name":"CONDITIONING-","label":"负面条件","type":"CONDITIONING","shape":3,"links":[40],"slot_index":2},{"name":"LATENT","label":"Latent","type":"LATENT","shape":3,"links":null},{"name":"VAE","label":"VAE","type":"VAE","shape":3,"links":[41],"slot_index":4},{"name":"IMAGE","label":"图像","type":"IMAGE","shape":3,"links":[42],"slot_index":5}],"properties":{"cnr_id":"efficiency-nodes-comfyui","ver":"3ead4afd120833f3bffdefeca0d6545df8051798","Node name for S&R":"KSampler (Efficient)"},"widgets_values":[-1,"randomize",50,7,"dpmpp_2m","karras",1,"auto","true"],"color":"#332222","bgcolor":"#553333","shape":1},{"id":9,"type":"LoadImage","pos":[200,-130],"size":[320,314],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","label":"图像","type":"IMAGE","shape":3,"links":[10,11,12],"slot_index":0},{"name":"MASK","label":"遮罩","type":"MASK","shape":3,"links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"LoadImage"},"widgets_values":["81.jpg","image"]},{"id":29,"type":"LoadImage","pos":[1439,-620],"size":[315,314],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","label":"图像","type":"IMAGE","links":[46]},{"name":"MASK","label":"遮罩","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.15","Node name for S&R":"LoadImage"},"widgets_values":["82.jpg","image"]}],"links":[[1,1,0,2,0,"MODEL"],[3,1,2,2,2,"CONDITIONING"],[5,1,4,2,4,"VAE"],[8,5,0,2,3,"LATENT"],[9,7,0,6,1,"CONTROL_NET"],[10,9,0,8,0,"IMAGE"],[11,9,0,10,0,"IMAGE"],[12,9,0,12,0,"IMAGE"],[13,12,0,10,1,"INT"],[14,12,1,10,2,"INT"],[15,10,0,8,1,"INT"],[16,8,0,6,2,"IMAGE"],[18,1,1,6,0,"CONDITIONING"],[20,16,0,14,1,"CONTROL_NET"],[21,10,0,17,1,"INT"],[23,17,0,14,2,"IMAGE"],[24,6,0,14,0,"CONDITIONING"],[25,14,0,2,1,"CONDITIONING"],[32,23,0,18,6,"BBOX_DETECTOR"],[36,18,0,25,0,"IMAGE"],[37,26,0,18,7,"SAM_MODEL"],[38,2,0,18,1,"MODEL"],[39,2,1,18,4,"CONDITIONING"],[40,2,2,18,5,"CONDITIONING"],[41,2,4,18,3,"VAE"],[42,2,5,18,0,"IMAGE"],[43,1,5,18,2,"CLIP"],[44,8,0,27,0,"IMAGE"],[45,17,0,28,0,"IMAGE"],[46,29,0,17,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.7156126100704154,"offset":[-459.83837892898873,801.7020504692656]},"workspace_info":{"id":"0d35c593-3600-43d4-9a43-1c9d1f821f4a","saveLock":false,"cloudID":null,"coverMediaPath":null},"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}